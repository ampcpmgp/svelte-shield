import test from "ava";
import json from "./kokoro-2.json";
import { composite } from "../morpheme";

/* 原文
私が先生と知り合いになったのは鎌倉である。その時私はまだ若々しい書生であった。暑中休暇を利用して海水浴に行った友達からぜひ来いという端書を受け取ったので、私は多少の金を工面して、出掛ける事にした。私は金の工面に二、三日を費やした。ところが私が鎌倉に着いて三日と経たないうちに、私を呼び寄せた友達は、急に国元から帰れという電報を受け取った。電報には母が病気だからと断ってあったけれども友達はそれを信じなかった。友達はかねてから国元にいる親たちに勧まない結婚を強いられていた。彼は現代の習慣からいうと結婚するにはあまり年が若過ぎた。それに肝心の当人が気に入らなかった。それで夏休みに当然帰るべきところを、わざと避けて東京の近くで遊んでいたのである。彼は電報を私に見せてどうしようと相談をした。私にはどうしていいか分らなかった。けれども実際彼の母が病気であるとすれば彼は固より帰るべきはずであった。それで彼はとうとう帰る事になった。せっかく来た私は一人取り残された。
*/

test("composite/kokoro-2", (t) => {
  const result = composite(json).map((item) => item.word);

  t.deepEqual(result, [
    "私が先生と",
    "知り合いに",
    "なったのは",
    "鎌倉である。",
    "その時私は",
    "まだ若々しい書生であった。",
    "暑中休暇を",
    "利用して",
    "海水浴に",
    "行った友達から",
    "ぜひ来いという",
    "端書を受け取ったので、",
    "私は多少の",
    "金を工面して、",
    "出掛ける事に",
    "した。",
    "私は金の",
    "工面に二、",
    "三日を費やした。",
    "ところが",
    "私が鎌倉に",
    "着いて三日と",
    "経たない",
    "うちに、",
    "私を呼び寄せた",
    "友達は、",
    "急に国元から",
    "帰れという",
    "電報を受け取った。",
    "電報には",
    "母が病気だからと",
    "断ってあったけれども",
    "友達はそれを",
    "信じなかった。",
    "友達はかねてから",
    "国元にいる",
    "親たちに",
    "勧まない",
    "結婚を強いられて",
    "いた。",
    "彼は現代の",
    "習慣から",
    "いうと結婚するには",
    "あまり年が",
    "若過ぎた。",
    "それに肝心の",
    "当人が気に入らなかった。",
    "それで夏休みに",
    "当然帰るべき",
    "ところを、",
    "わざと避けて",
    "東京の近くで",
    "遊んでいた",
    "のである。",
    "彼は電報を",
    "私に見せて",
    "どうしようと",
    "相談をした。",
    "私にはどうして",
    "いいか分らなかった。",
    "けれども",
    "実際彼の",
    "母が病気であると",
    "すれば彼は",
    "固より帰るべき",
    "はずであった。",
    "それで彼は",
    "とうとう",
    "帰る事に",
    "なった。",
    "せっかく",
    "来た私は",
    "一人取り残された。",
  ]);
});
